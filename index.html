<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Calendarium - smart life calendar with data skins</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BPS2S5MCLH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BPS2S5MCLH');
    </script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Smart Life Calendar with data skins from WHO and HMD">
    <meta name="keywords" content="Life Calendar, calendar">
    <meta name="author" content="Aleksei Sotskov">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!--script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css"-->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

    <style type="text/css">
      @font-face {
        font-family: 'Verdana';
        src: URL('src/fonts/verdana/verdana.ttf') format('truetype');
      }
      @font-face {
        font-family: 'Verdana';
        src: URL('src/fonts/verdana/verdana-bold.ttf') format('truetype');
        font-weight: bold;
      }

      body, html {
        padding: 0;
        margin: 0;
        background-color: snow;
        font-family: 'Open Sans', sans-serif;
      }
      /* https://stackoverflow.com/questions/29205294/how-to-achieve-blinking-effect-in-svg */
      @keyframes blink {
        100%, 0% { fill: white; }
        80% { fill: orange; }
      }
      .blink {
        animation: blink 1.5s infinite;
      }
      .right {
        text-align: right;
        width: 50%;
        padding-left: 10px;
      }
      .left {
        text-align: left;
        padding-right: 10px;
      }
      #faq {
        /*width: 600px;
        margin-left: calc(50% - 300px);*/
        margin: 10% 0 10% 0;
      }
      #faq h1 {
        text-align: center;
        font-size: 1.5em;
      }
      p, ul {
        font-size: 0.875rem;
      }
      ul {
        padding: 0 2em;
      }
      p.has_list {
        margin-bottom: 0.5rem;
      }
      #loading {
        left: 50%;
        top: 50%;
        position: absolute;
        transform: translate(-50%, -50%);
      }
      label {
        margin: 10px 0 2px 2px;
        color: gray;
        font-size: 1.2em;
      }
      #calendar {
        margin: 10px;
      }
      @media only screen and (min-width: 992px) {
        #calendar {
          float: right;
        }
      }
      .container {
        padding: 0;
      }
      .row {
        margin-left: 0;
        margin-right: 0;
      }
      input::-webkit-date-and-time-value {
        text-align: left;
      }
      .clarify_field {
        color: gray;
        padding-left: 3px;
      }
    </style>

    <!-- https://github.com/davidshimjs/qrcodejs -->
    <script type="text/javascript" src="src/js/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="src/js/qrcode/qrcode.min.js"></script>

    <script type="text/javascript">
      window.mobileCheck = function() {  // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser
        let check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
      };
      function is_iOS() {
        return [
          'iPad Simulator',
          'iPhone Simulator',
          'iPad',
          'iPhone',
        ].includes(navigator.platform)
      }
      function is_bad_mobile() {
        if (!is_iOS())
          return false;

        const iOS_version = /(iPhone|iPad) OS ([1-9]+)/g.exec(window.navigator.userAgent)?.[2] || 0; // https://gist.github.com/ngoclt/2857281
        return iOS_version <= 15; // for iOS 15 svg offset incorrectly calculated
      }
      const is_mobile = is_bad_mobile();//is_iOS();//window.mobileCheck();
      const supported_countries = ['at', 'au', 'by', 'be', 'bg', 'ca', 'cl', 'hr', 'cz', 'fi', 'fr', 'de', 'gr', 'hk', 'hu', 'is', 'ie', 'il', 'it', 'jp', 'lv', 'lt', 'lu', 'nl', 'nz', 'no', 'pl', 'pt', 'kr', 'ru', 'sk', 'si', 'es', 'se', 'ch', 'tw', 'ua', 'uk', 'us'];

      const circle_radius = 2;
      const number_of_weeks_in_a_row = 52;
      const number_of_years = 101;
      const calendar_step_horizontal = 5;
      const calendar_step_vertical = 5;
      const calendar_weeks_numbers_height = 5;
      const calendar_years_numbers_width = 12;
      const calendar_le_at_birth_median_peak_width = 12;
      const calendar_new_year_label_height = 5;
      const calendar_height = number_of_years * calendar_step_vertical + calendar_weeks_numbers_height + calendar_new_year_label_height + 5;
      //if (is_mobile)
      //  calendar_height += 100;
      const calendar_width = number_of_weeks_in_a_row * calendar_step_horizontal + calendar_years_numbers_width + calendar_le_at_birth_median_peak_width + 6 + 10 + 16;
      const calendar_qrcode_url_domain = "https://calendarium.me";
      const calendar_id = Math.random().toString(36).slice(2);  // https://stackoverflow.com/questions/10726909/random-alpha-numeric-string-in-javascript
      const svg_margin = 5;
      var qrcode;
      var antistroke = "black";
      var antistroke_width = 1;
      const color_base = "snow";

      var data_dx = {};
      var data_mx = {};
      var data_all = {'dx': [], 'mx': []};
      var last_year_in_dataset = 0;

      function enrich_data_mdx_dict(data_mdx, mdx_data, country_code, sex, target_year) {
        let data_country = data_mdx[country_code];
        if (!data_country)
          data_mdx[country_code] = {};
        
        let data_country_sex = data_mdx[country_code][sex];
        if (!data_country_sex)
          data_mdx[country_code][sex] = {};

        let data_country_sex_year = data_mdx[country_code][sex][target_year];
        if (!data_country_sex_year)
          data_mdx[country_code][sex][target_year] = mdx_data;
      }

      function get_mortality_data(country_code, sex, target_year) {
        return fetch('https://calendarium.me/data/mortality/' + country_code + '/' + sex + 'ltper_1x1.txt')
          .then((response) => response.text())
          .then((data) => {
            const lines = data.split("\n");

            const offset_data_headers = 3;
            const index_column_year = 1;
            const index_column_mx = 3;
            const index_column_dx = 7;

            last_year_in_dataset = lines[lines.length - 2].split(' ')[2];
            if (!target_year)
              target_year = last_year_in_dataset;

            let mx_data = [];
            let dx_data = [];
            for (let i = offset_data_headers; i < lines.length; i++) {
              const splitted_data_line = lines[i].replace(/\s+/g, ',').split(',');
              const data_year = splitted_data_line[index_column_year];

              if (data_year == target_year) {
                dx_data.push(parseInt(splitted_data_line[index_column_dx]));
                mx_data.push(splitted_data_line[index_column_mx] * 100);
              }
            }

            data_all['mx'] = data_all['mx'].concat(mx_data.map(Number));
            enrich_data_mdx_dict(data_mx, mx_data, country_code, sex, target_year);
            data_all['dx'] = data_all['dx'].concat(dx_data.map(Number));
            enrich_data_mdx_dict(data_dx, dx_data, country_code, sex, target_year);
          }
        );
      }

      function get_total(range) {
        return range.reduce((a, b) => a + b, 0);
      }

      function get_age(birthday_date) {  // returns number of full years from birthday till now
        const ms = new Date() - birthday_date;
        return Math.floor(ms / (1000 * 60 * 60 * 24 * 365.242199));
      }

      function get_percentiles(range, percentiles_range) {
        let percentiles = {};
        for (let i in percentiles_range) {
          percentiles[percentiles_range[i]] = 0;
        }

        const total = get_total(range);
        let integral = 0;        
        for (let i = 0; i < range.length; i++) {
          for (let j in percentiles_range) {
            if (integral <= percentiles_range[j] / 100) {
              percentiles[percentiles_range[j]] = i + 1;
            }
          }
          integral += range[i] / total;
        }
        return percentiles;
      }

      function get_peak_value(range) {
        const max_value = Math.max(...range);
        const peak = range.indexOf(max_value) + 1;  // to start from 1
        return {'peak': peak, 'value': max_value};
      }

      function generate_url(user_values) {
        return `${calendar_qrcode_url_domain}?p=${user_values.birthday},${user_values.country_code},${user_values.country_code_latest},${user_values.sex},${user_values.sex_to_compare}`
      }
      function generate_qrcode_url(user_values) {
        return generate_url(user_values) + `&cid=${calendar_id}&a=abc&b=cde&c=def`;
      }

      function init_qrcode(user_values, size) {
        var qrcode = new QRCode(document.getElementById("qrcode"), {
          text: generate_qrcode_url(user_values),
          width: size,
          height: size,
          colorDark : "black",
          colorLight : "white",
          correctLevel : QRCode.CorrectLevel.L,  // L, M, Q, H
        });
        return qrcode;
      }

      function get_user_selected_parameters() {
        const sex = document.getElementById('sex').value;
        const birthday = document.getElementById('birthday').value;
        const country_code = document.getElementById('country_code').value;
        const country_code_latest = document.getElementById('country_code_latest').value;
        const sex_to_compare = document.getElementById('sex_to_compare').value;
        if (!sex_to_compare)
          sex_to_compare = sex;
        return {'birthday': birthday, 'country_code': country_code, 'country_code_latest': country_code_latest, 'sex': sex, 'sex_to_compare': sex_to_compare};
      }

      function set_user_selected_parameters(user_values) {
        document.getElementById('birthday').value = user_values.birthday;
        document.getElementById('country_code').value = user_values.country_code;
        document.getElementById('country_code_latest').value = user_values.country_code_latest;
        document.getElementById('sex').value = user_values.sex;
        document.getElementById('sex_to_compare').value = user_values.sex_to_compare;
      }

      function update_qrcode_url(user_values) {
        qrcode.clear();
        qrcode.makeCode(generate_qrcode_url(user_values));
      }

      function redraw_calendar() {
        const user_values = get_user_selected_parameters();
        if (window.location.protocol != 'file:') {  // doesn't work for local files
          window.history.replaceState(null, null, generate_url(user_values));
        }

        draw_calendar(user_values);
        update_qrcode_url(user_values);
      }

      function change_country_of_birth() {
        const country_code = document.getElementById('country_code').value;
        document.getElementById('country_code_latest').value = country_code;
        redraw_calendar();
      }

      function change_sex() {
        const sex = document.getElementById('sex').value;
        document.getElementById('sex_to_compare').value = sex;
        redraw_calendar();
      }

      function calculate_weeks_between(earlier_date, later_date) {  // https://stackoverflow.com/questions/542938/how-to-calculate-number-of-days-between-two-dates
        const diff_ms = later_date - earlier_date;
        const diff_days = diff_ms / (1000 * 60 * 60 * 24);
        return Math.floor(diff_days / 7.024038461538462);  // (365*3+366)/4/52
      }

      function calculate_new_year_week(birthday_date) {
        const next_year = birthday_date.getFullYear() + 1;
        const diff_ms = new Date(next_year + '-01-01') - birthday_date;
        const diff_days = diff_ms / (1000 * 60 * 60 * 24);

        let week_new_year = Math.floor(diff_days / 7) + 1;  // no errors for weeks during 1 year
        if (week_new_year == 53)  // leap year week possible mistake fix
          week_new_year = 1;
        return week_new_year;
      }

      function draw_label_new_year(week_new_year) {
        const cx = week_new_year * calendar_step_horizontal + calendar_years_numbers_width + circle_radius + 1;
        const cy = calendar_height - number_of_years * calendar_step_vertical - calendar_weeks_numbers_height - 1;
        return '<text font-size="3" fill="black" font-family="Verdana" text-anchor="middle" alignment-baseline="baseline" x="' + cx + '" y="' + cy + '">New Year</text>';
      }

      function draw_legend(first, second, third) {
        const cx = 18;
        let cy = 0;
        if (is_mobile)
          cy += 10;

        let content = '';
        //const cy3 = cy;
        //content += '<rect x="' + cx + '" y="' + cy3 + '" width="55" height="5" rx="0" fill="white" stroke="white" stroke-width="0.3" />';
        let cx2 = cx + 1.5;
        let cy2 = cy + 3 + 1;
        if (is_mobile)
          cy2 -= 9;
        
        const cy4 = cy2;
        if (first)
          content += `<text font-size="3" fill="black" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="${cx2}" y="${cy4}" font-weight="bold">${first}</text>`;
        else
          cx2 = cx2 - cx - 1.5;

        const cx5 = cx2 + 19;
        content += `<text font-size="3" fill="gray" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="${cx5}" y="${cy4}" font-weight="bold">${second}</text>`;

        if (second != third) {
          const cx6 = cx5 + 19;
          content += `<text font-size="3" fill="gray" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="${cx6}" y="${cy4}" font-weight="bold-">${third}</text>`;
        }

        return content
      }

      function draw_label_deaths() {
        const cx = calendar_years_numbers_width + calendar_step_horizontal;
        let cy = calendar_height - number_of_years * calendar_step_vertical - calendar_weeks_numbers_height + 0;
        if (is_mobile)
          cy += 10;

        let content = `<rect x="${cx}" y="${cy}" width="25" height="5" rx="0" fill="${color_base}" stroke="${color_base}" stroke-width="0.3" />`;
        const cy3 = cy + calendar_step_vertical;
        const cx2 = cx + 1.5;
        let cy2 = cy + 3 + 1;
        if (is_mobile)
          cy2 -= 9;
        content += '<text font-size="3" fill="black" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="' + cx2 + '" y="' + cy2 + '" font-weight="bold-">Deaths at age</text>';
        return content
      }

      function draw_label_chances() {
        const cx2 = number_of_weeks_in_a_row * calendar_step_horizontal + calendar_years_numbers_width + 4;
        let cy = calendar_height - number_of_years * calendar_step_vertical - calendar_weeks_numbers_height + 1;
        if (is_mobile)
          cy += 10;
        const cx = cx2 - 29 - 5;
        let content = `<rect x="${cx}" y="${cy}" width="35" height="4" rx="0" fill="${color_base}" stroke="${color_base}" stroke-width="0.3" />`;
        let cy2 = cy + 3;
        if (is_mobile)
          cy2 -= 9;
        content += '<text font-size="3" fill="black" font-family="Verdana" text-anchor="end" alignment-baseline="baseline" x="' + cx2 + '" y="' + cy2 + '" font-weight="bold-">Chance to die at age</text>';
        return content
      }

      function draw_weeks_numbers() {
        let content = '';

        for (let week = 1; week <= number_of_weeks_in_a_row; week++) {
          if (week % 4 == 0) { // add a marker for every 4-th week
            let x_offset = (week + 1) * calendar_step_horizontal + calendar_years_numbers_width;
            let cx = x_offset - circle_radius;
            let cy = calendar_height;
            if (is_mobile)
              cy += 0;
            content += '<text font-size="3" fill="black" font-family="Verdana" text-anchor="middle" alignment-baseline="baseline" x="' + cx + '" y="' + cy +'" font-weight="bold">';
            content += week;
            content += '</text>';
          }
        }

        return content;
      }

      function draw_years_numbers(birthday_date) {
        let content = '';

        for (let year = 1; year <= number_of_years; year++) {
          if (year % 5 == 0) { // add age marker for every 5-th year
            let y_offset = year * calendar_step_vertical + 1;
            if (is_mobile)  // idk why on mobiles is calculated differently
              y_offset -= 1;

            const cy = calendar_height - y_offset //+ circle_radius;
            content += '<text font-size="3" fill="black" font-family="Verdana" text-anchor="end" alignment-baseline="baseline" x="15" y="' + cy + '" font-weight="bold">'
            content += year;
            content += '</text>';
          
            const cy2 = cy - calendar_step_vertical;
            content += '<text font-size="3" fill="black" font-family="Verdana" text-anchor="end" alignment-baseline="baseline" x="15" y="' + cy2 + '">'

            const birthday_year = birthday_date.getFullYear();
            if ((birthday_date.getMonth() == 0 && birthday_date.getDate() <= 9) || 
                (birthday_date.getMonth() == 11 && birthday_date.getDate() > 25))  // in case of birthday during 1st week of January don't write 2004/05, but 2004
              content += birthday_year + year;
            else {
              const year_from = (birthday_year + year).toString();
              const year_to = (birthday_year + year + 1).toString();
              content +=  year_from + '/' + year_to.slice(2, 4);  // 2023/24
            }
            content += '</text>';
          }
        }

        return content;
      }

      function coordinates_to_points(coordinates) {
        let vertical_offset = calendar_weeks_numbers_height + circle_radius;
        if (is_mobile)  // idk why on mobiles is calculated differently
          vertical_offset -= 10;

        let points = '';
        for (let key in coordinates) {
          const value = coordinates[key];
          const vertical = calendar_height - (key - 1) * calendar_step_vertical - vertical_offset;
          const horizontal = (value - 1) * calendar_step_horizontal + calendar_years_numbers_width + 10;
          points += horizontal + ',' + vertical + ' ';
        }
        return points;
      }

      function make_coordinates(mdx, array, age, position, scale_y) {
        const total = array.reduce((a, b) => a + b, 0);
        let max = get_peak_value(data_all[mdx]).value;
        if (max < 100)
          max = 100;

        let coordinates_dotss = {};
        let coordinates_dotss_before_age = {};
        let coordinates_dotss_after_age = {};
        let coordinates_integral_before_age = {};
        let coordinates_integral_after_age = {};
        let coordinates_integral = {};
        let integral = 0;

        if (!scale_y)
          scale_y = 1;
        
        for (let year = 0; year < number_of_years; year++) {
          const value = array[year];
          let value_mapped_on_weeks;
          if (position == "right") 
            value_mapped_on_weeks = number_of_weeks_in_a_row - (value / max) * number_of_weeks_in_a_row * scale_y;
          else
            value_mapped_on_weeks = (value / max) * number_of_weeks_in_a_row * scale_y;

          coordinates_dotss[year + 1] = value_mapped_on_weeks;  // +1 because year in data starts with 0, on chart with 1
          integral += (value / total) * number_of_weeks_in_a_row;
          coordinates_integral[year + 1] = integral;

          if (year <= age) {
            coordinates_dotss_before_age[year + 1] = value_mapped_on_weeks;
            coordinates_integral_before_age[year + 1] = integral;
          }
          if (year >= age) {
            coordinates_dotss_after_age[year + 1] = value_mapped_on_weeks;
            coordinates_integral_after_age[year + 1] = integral;
          }
        }
        
        return {
          //'dotss': coordinates_dotss,
          'dotss_before_age': coordinates_dotss_before_age,
          'dotss_after_age': coordinates_dotss_after_age,
          //'integral': coordinates_integral,
          'integral_before_age': coordinates_integral_before_age,
          'integral_after_age': coordinates_integral_after_age,
        };
      }

      function draw_polyline(coordinates, stroke, stroke_width, stroke_dasharray) {
        let content = `<polyline fill="none" stroke="${stroke}" stroke-width="${stroke_width}" stroke-linejoin="round" stroke-dasharray="${stroke_dasharray}" points="`;
        content += coordinates_to_points(coordinates);
        content += '"/>';

        return content;
      }

      function draw_line(mdx, data, stroke, age, stroke_dasharray) {
        let content = '';

        //const antistroke = "black"
        let stroke_width = 0.5;
        //const antistroke_width = stroke_width * 1.5;
        let position = "left";
        let scale_y = 0.7;
        if (mdx == "mx") {
          position = "right";
          scale_y = 1;
        }
        const coordinates = make_coordinates(mdx, data, age, position, scale_y);

        content += draw_polyline(coordinates.dotss_before_age, antistroke, antistroke_width, stroke_dasharray);
        content += draw_polyline(coordinates.dotss_after_age, stroke, stroke_width, stroke_dasharray);

        return content;
      }

      function transform_fill_ranges_to_coordinates(fill_ranges, birthday_date) {
        let new_fill_ranges = [];
        for (let i = 0; i < fill_ranges.length; i++) {
          const range = fill_ranges[i];

          let new_range = {};
          new_range["fill"] = range["fill"];
          new_range["animate"] = range["animate"];
          new_range["stroke"] = range["stroke"];
          new_range["stroke_width"] = range["stroke_width"];

          // from
          if (!range["from"])
            new_range["from_week"] = 1;
          else if (Number.isInteger(range["from"]))
            new_range["from_week"] = (range["from"] - 1) * number_of_weeks_in_a_row + 1;
          else  // date format
            new_range["from_week"] = calculate_weeks_between(birthday_date, range["from"]);
        
          // to
          if (!range["to"])
            new_range["to_week"] = number_of_weeks_in_a_row * number_of_years;
          else if (Number.isInteger(range["to"]))
            new_range["to_week"] = range["to"] * number_of_weeks_in_a_row;
          else  // date format
            new_range["to_week"] = calculate_weeks_between(birthday_date, range["to"]);
          
          new_fill_ranges.push(new_range);
        }
        return new_fill_ranges;
      }

      function draw_label(data) {
        content = `<rect x="${data.rect.x}" y="${data.rect.y}" width="${data.rect.width}" height="4" rx="0" fill="${color_base}" stroke="${color_base}" stroke-width="0.3" />`;
        content += `<text font-size="3" fill="${data.text.fill}" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="${data.text.x}" y="${data.text.y}" font-weight="${data.text.weight}">${data.text.text}</text>`;
        return content;
      }

      function draw_datasource() {
        return '<text font-size="3" fill="black" font-family="Verdana" text-anchor="end" alignment-baseline="baseline" x="276" y="5" font-weight="normal">Data source: mortality.org</text>';
      }

      function draw_special_age_label(data) {
        return `<text font-size="3" fill="${data.color}" font-family="Verdana" text-anchor="start" alignment-baseline="baseline" x="${data.x}" y="${data.y}" font-weight="${data.weight}">${data.text}</text>`;
      }

      function calculate_svg_height() {
        const ratio_current_svg_canvas = 521 / (316 + 20); // to fix
        const margins_svg_canvas = svg_margin * 2;
        const innerHeight = window.innerHeight - margins_svg_canvas;
        const innerWidth = window.innerWidth - margins_svg_canvas;
        const ratio_current_screen = innerHeight / (innerWidth - margins_svg_canvas);
        if (ratio_current_screen > ratio_current_svg_canvas)
          return (((innerWidth * ratio_current_svg_canvas) * 100) / innerHeight) + '%';
        else  // optimize by height
          return innerHeight - 30 + 'px';
      }

      async function draw_calendar(user_values) {
        data_all = {'mx': [], 'dx': []}; // reset

        const date = user_values['birthday'];
        const country_code = user_values['country_code'];
        const country_code_latest = user_values['country_code_latest'];
        const sex = user_values['sex'];
        const sex_to_compare = user_values['sex_to_compare'];

        const birthday_date = new Date(date);
        let birthday_year = birthday_date.getFullYear();

        await get_mortality_data(country_code, sex, birthday_year);
        const data_to_draw_mx_birthday = data_mx[country_code][sex][birthday_year];
        const data_to_draw_dx_birthday = data_dx[country_code][sex][birthday_year];
        let label_chart_first = `${country_code}${birthday_year}${sex}`.toUpperCase();

        let have_data_for_charts = true
        if (data_to_draw_dx_birthday.length == 0) {
          have_data_for_charts = false;
          label_chart_first = undefined;
        }

        await get_mortality_data(country_code, sex);
        // birthday_year = last_year_in_dataset
        const last_year_in_dataset_1 = last_year_in_dataset;
        const data_to_draw_mx_latest = data_mx[country_code][sex][last_year_in_dataset_1];
        const data_to_draw_dx_latest = data_dx[country_code][sex][last_year_in_dataset_1];
        const label_chart_second = `${country_code}${last_year_in_dataset_1}${sex}`.toUpperCase();

        if (country_code_latest != country_code || sex != sex_to_compare)
          await get_mortality_data(country_code_latest, sex_to_compare); // to fix last year will be calculated automatically because not set
        const last_year_in_dataset_2 = last_year_in_dataset;
        const data_to_draw_mx_another_country = data_mx[country_code_latest][sex_to_compare][last_year_in_dataset_2];
        const data_to_draw_dx_another_country = data_dx[country_code_latest][sex_to_compare][last_year_in_dataset_2];
        const label_chart_third = `${country_code_latest}${last_year_in_dataset_2}${sex_to_compare}`.toUpperCase();
        
        const percentiles_to_draw = [50, 80, 90];
        const year_percentiles_dx_birthday = get_percentiles(data_to_draw_dx_birthday, percentiles_to_draw);
        const year_percentiles_dx_latest = get_percentiles(data_to_draw_dx_latest, percentiles_to_draw);
        const year_percentiles_dx_another_country = get_percentiles(data_to_draw_dx_another_country, percentiles_to_draw);

        const new_year_dot_color_above_the_age = "black";
        const new_year_dot_color_below_the_age = "black";
        let fill_ranges = [ // init
          {"fill": "white"},
          {"fill": "skyblue", "to": new Date(), "stroke_width": "0.2"},
          //{"fill": "white", "from": year_percentiles_dx['50'], "to": year_percentiles_dx['50'], "stroke_width": "0.32"},
          //{"fill": "white", "from": year_percentiles_dx['80'], "to": year_percentiles_dx['80'], "stroke_width": "0.32"},
          //{"fill": "white", "from": year_percentiles_dx['90'], "to": year_percentiles_dx['90'], "stroke_width": "0.32"},
          //{"fill": "orange", "from": "2024-05-31", "to": "2024-05-31", "animate": "blink"},
          //{"fill": "skyblue", "from": "1989-01-08", "to": new Date()},
          //{"fill": "aquamarine", "from": "2014-06-04", "to": new Date()}, 
        ];

        const fill_ranges_transformed = transform_fill_ranges_to_coordinates(fill_ranges, birthday_date);
        let ch = calendar_height + 1;
        if (is_mobile)
          ch += calendar_weeks_numbers_height + calendar_new_year_label_height; // idk why
        const svg_height = calculate_svg_height();
        let content = `<svg id="svg_canvas" height="${svg_height}" viewBox="0 0 ${calendar_width} ${ch}" xmlns="http://www.w3.org/2000/svg" style="margin: ${svg_margin}px; margin-top: 10px; width: auto;">`;

        content += draw_weeks_numbers();
        content += draw_years_numbers(birthday_date);

        const week_new_year = calculate_new_year_week(birthday_date);

        const age = get_age(birthday_date);
        const special_ages = [1, 2, 3, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, age + 1, number_of_years];  // to draw integral values for these years

        let total_weeks = 1;
        //let percentiles_labels = {};
        let labels = '';
        let labels_special_years = '';
        for (let year = 1; year <= number_of_years; year++) {
          let y_offset = calendar_height - year * calendar_step_vertical;
          if (is_mobile)
            y_offset += 10;
          
          let cy = y_offset - circle_radius;
          for (let week = 1; week <= number_of_weeks_in_a_row; week++) {
            let cx = (week + 1) * calendar_step_horizontal + calendar_years_numbers_width - circle_radius;
            //content += '<circle cx="' + cx + '" cy="' + cy + '" r="' + circle_radius + '" ';
            const rect_width = 3.5;
            const cx3 = cx - rect_width / 2;
            const cy3 = cy - rect_width / 2;
            antistroke = "black";
            antistroke_width = 0.5;
            content += `<rect x="${cx3}" y="${cy3}" width="${rect_width}" height="${rect_width}" rx="20"`;
            
            let circle_color = "";
            let stroke = "black";
            let stroke_width = "0.07";
            let blink = false;
            for (let i in fill_ranges_transformed) {
              const range = fill_ranges_transformed[i];
              if (range["from_week"] <= total_weeks && range["to_week"] >= total_weeks) {
                circle_color = range["fill"];
                if (range["stroke"])
                  stroke = range["stroke"];
                if (range["stroke_width"])
                  stroke_width = range["stroke_width"];
              }
              if (range["to_week"] == total_weeks && range["animate"] == "blink")
                content += 'class="blink" ';
            }

            content += 'fill="' + circle_color + '" ';
            content += 'stroke="' + stroke + '" stroke-width="' + stroke_width + '"/>';

            if (week == week_new_year) {  // dot for a new year week
              let dot_color = new_year_dot_color_above_the_age;
              if (year <= age) {
                dot_color = new_year_dot_color_below_the_age;
              }
              if (year == age + 1) {
                if (week_new_year < calculate_weeks_between(birthday_date, new Date()) % number_of_weeks_in_a_row) {
                  dot_color = new_year_dot_color_below_the_age;
                }
              }

              content += `<circle cx="${cx}" cy="${cy}" r="0.2" fill="${dot_color}" stroke="${dot_color}" stroke-width="0.2"/>`;
            }

            total_weeks++;
          }

          const cx2 = 19;
          const cx4 = cx2 + 10;
          let cy2 = cy + 1;
          if (is_mobile)
            cy2 = cy2 - 10 + 1;

          for (let i = 0; i < percentiles_to_draw.length; i++) {
            let percentile = percentiles_to_draw[i];
            const cx5 = cx2 - 2;
            let cy5 = cy2 - 3;
            if (is_mobile)
              cy5 = cy5 + 10 - 1;
            
            if (country_code != country_code_latest || sex != sex_to_compare) {
              if (year == year_percentiles_dx_another_country[percentile]) {
                labels += draw_label({'rect': {'x': cx5, 'y': cy5, 'width': 20}, 'text': {'x': cx4, 'y': cy2, 'text': percentile + '%', 'fill': 'gray', 'weight': 'normal'}});
              }
            }
            if (have_data_for_charts) {
              if (year == year_percentiles_dx_birthday[percentile]) {
                labels += draw_label({'rect': {'x': cx5, 'y': cy5, 'width': 10}, 'text': {'x': cx2, 'y': cy2, 'text': percentile + '%', 'fill': 'black', 'weight': 'bold'}});
              }
            }
            if (year == year_percentiles_dx_latest[percentile]) {
              labels += draw_label({'rect': {'x': cx5, 'y': cy5, 'width': 10}, 'text': {'x': cx2, 'y': cy2, 'text': percentile + '%', 'fill': 'gray', 'weight': 'bold'}});
            }
          }

          // drawing labels for special ages
          if (special_ages.includes(year)) {
            let cy2 = cy + 1;
            if (is_mobile)
              cy2 = cy2 - 10 + 1;
            let cx2 = calendar_step_horizontal * number_of_weeks_in_a_row + calendar_years_numbers_width + 10 - circle_radius;

            if (have_data_for_charts) {
              labels_special_years += draw_special_age_label({'color': 'black', 'x': cx2, 'y': cy2, 'weight': 'bold', 'text': data_mx[country_code][sex][birthday_year][year - 1].toFixed(1) + '%'});
              cx2 += 11;
              if (data_mx[country_code][sex][birthday_year][year - 1] > 10)
                cx2 += 2;
            }

            labels_special_years += draw_special_age_label({'color': 'gray', 'x': cx2, 'y': cy2, 'weight': 'bold', 'text': data_mx[country_code][sex][last_year_in_dataset_1][year - 1].toFixed(1) + '%'});

            if (country_code != country_code_latest || sex != sex_to_compare) {
              cx2 += 11;
              if (data_mx[country_code][sex][last_year_in_dataset_1][year - 1] > 10)
                cx2 += 2;
              labels_special_years += draw_special_age_label({'color': 'gray', 'x': cx2, 'y': cy2, 'weight': 'normal', 'text': data_mx[country_code_latest][sex_to_compare][last_year_in_dataset_2][year - 1].toFixed(1) + '%'});
            }
          }
        }

        if (have_data_for_charts) {
          antistroke = "black"
          content += draw_line("mx", data_to_draw_mx_birthday, "black", age);
          content += draw_line("dx", data_to_draw_dx_birthday, "black", age);
        }

        antistroke = "gray"
        const latest = "gray"
        content += draw_line("mx", data_to_draw_mx_latest, latest, age);
        content += draw_line("dx", data_to_draw_dx_latest, latest, age);

        if (country_code_latest != country_code || sex != sex_to_compare) {
          content += draw_line("mx", data_to_draw_mx_another_country, "gray", age, "4 2");
          content += draw_line("dx", data_to_draw_dx_another_country, "gray", age, "4 2");
        }

        content += draw_label_new_year(week_new_year);
        content += draw_label_chances();
        content += draw_label_deaths();

        content += draw_legend(label_chart_first, label_chart_second, label_chart_third);
        content += draw_datasource();
        content += labels;
        content += labels_special_years;
        content += '</svg>';

        document.getElementById("calendar").innerHTML = content;
        switch_off_loading();
      }

      function get_parameters_from_url() {
        const current_url = new URL(window.location.href);
        const params = current_url.searchParams.get("p");
        if (!params)
          return;

        const splitted_params = params.split(',');
        let sex_to_compare = splitted_params[4];
        if (!sex_to_compare)
          sex_to_compare = splitted_params[3]
        return {'birthday': splitted_params[0], 'country_code': splitted_params[1], 'country_code_latest': splitted_params[2], 'sex': splitted_params[3], 'sex_to_compare': sex_to_compare};
      }

      function switch_off_loading() {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('controls').style.display = '';
        document.getElementById('faq').style.display = '';
      }

      function prepare_for_print() {
        document.getElementById('controls').style.display = 'none';
        document.getElementById('faq').style.display = 'none';
        document.getElementById('qrcode').style.display = '';
        document.getElementById('svg_canvas').style.height = '996px';
        document.getElementsByClassName('container')[0].classList.remove("container");
        
        const svg_canvas = document.getElementById('svg_canvas');
        svg_canvas.style.marginTop = '2.5%';
        print();
      }

      function guess_the_country() {
        const browser_language = navigator.language || navigator.userLanguage;
        if (!browser_language)
          return;

        const browser_country = browser_language.toLowerCase().split('-')[1];
        if (!supported_countries.includes(browser_country))
          return;

        document.getElementById('country_code').value = browser_country;
        document.getElementById('country_code_latest').value = browser_country;
      }

      window.onload = function() {
        guess_the_country();
        let user_values = get_parameters_from_url();
        if (!user_values)
          user_values = get_user_selected_parameters();
        else
          set_user_selected_parameters(user_values);

        draw_calendar(user_values);
        qrcode = init_qrcode(user_values, 66);
      };
    </script>
  </head>
  <body>
    <div id="loading">
      <p>ðŸ“… Loading Calendarium...</p>
    </div>
    <div id="qrcode" style="position: absolute; padding: 5px; background-color: white; top: 84.7%; left: 64.6%; border-radius: 0px; display: none;"></div>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6 offset-lg-0 col-md-12 col-sm-12" style="height: 100%;">
          <div id="calendar"></div>
        </div>
      
        <div class="col-lg-3 col-md-8 col-sm-10 col-11">
          <div id="controls" style="color: black; font-size: 0.7em; display: none; margin-top: 10px;">
            <label>Sex at birth:</label>
            <select id="sex" onchange="change_sex();" class="form-control form-select form-select-sm">
              <option value="m">Male</option>
              <option value="f">Female</option>
            </select>

            <label>Date of birth:</label>
            <input id="birthday" type="date" value="1990-01-01" onchange="redraw_calendar();" class="form-control form-select form-select-sm">

            <label>Country of birth & childhood:</label>
            <select id="country_code" onchange="change_country_of_birth();" class="form-control form-select form-select-sm">
              <option value="at">Austria (1947-2019)</option>
              <option value="au">Australia (1921-2020)</option>
              <option value="by">Belarus (1959-2018)</option>
              <option value="be">Belgium (1841-2022)</option>
              <option value="bg">Bulgaria (1947-2021)</option>
              <option value="ca">Canada (1921-2021)</option>
              <option value="cl">Chile (1992-2020)</option>
              <option value="hr">Croatia (2001-2020)</option>
              <option value="cz">Czechia (1950-2021)</option>
              <option value="fi">Finland (1878-2022)</option>
              <option value="fr">France (1816-2021)</option>
              <option value="de">Germany (1990-2020)</option>
              <option value="gr">Greece (1981-2019)</option>
              <option value="hk">Hong Kong (1986-2020)</option>
              <option value="hu">Hungary (1950-2020)</option>
              <option value="is">Iceland (1838-2021)</option>
              <option value="ie">Ireland (1950-2020)</option>
              <option value="il">Israel (1983-2016)</option>
              <option value="it">Italy (1872-2020)</option>
              <option value="jp">Japan (1947-2021)</option>
              <option value="lv">Latvia (1959-2019)</option>
              <option value="lt">Lithuania (1959-2020)</option>
              <option value="lu">Luxembourg (1960-2022)</option>
              <option value="nl">Netherlands (1850-2021)</option>
              <option value="nz">New Zealand (1948-2021)</option>
              <option value="no">Norway (1846-2022)</option>
              <option value="pl">Poland (1958-2019)</option>
              <option value="pt">Portugal (1940-2022)</option>
              <option value="kr">Republic of Korea (2003-2020)</option>
              <option value="ru">Russia (1959-2014)</option>
              <option value="sk">Slovakia (1950-2019)</option>
              <option value="si">Slovenia (1983-2019)</option>
              <option value="es">Spain (1908-2021)</option>
              <option value="se">Sweden (1751-2022)</option>
              <option value="ch">Switzerland (1876-2022)</option>
              <option value="tw">Taiwan (1970-2021)</option>
              <option value="ua">Ukraine (1959-2013)</option>
              <option value="uk">United Kingdom (1922-2021)</option>
              <option value="us">United States (1933-2021)</option>        
            </select>
            <span class="clarify_field">(in brackets are data-available years)</span><br>

            <label>Country mostly lived in during last years:</label>
            <select id="country_code_latest" onchange="redraw_calendar();" class="form-control form-select form-select-sm">
              <option value="at">Austria</option>
              <option value="au">Australia</option>
              <option value="by">Belarus</option>
              <option value="be">Belgium</option>
              <option value="bg">Bulgaria</option>
              <option value="ca">Canada</option>
              <option value="cl">Chile</option>
              <option value="hr">Croatia</option>
              <option value="cz">Czechia</option>
              <option value="fi">Finland</option>
              <option value="fr">France</option>
              <option value="de">Germany</option>
              <option value="gr">Greece</option>
              <option value="hk">Hong Kong</option>
              <option value="hu">Hungary</option>
              <option value="is">Iceland</option>
              <option value="ie">Ireland</option>
              <option value="il">Israel</option>
              <option value="it">Italy</option>
              <option value="jp">Japan</option>
              <option value="lv">Latvia</option>
              <option value="lt">Lithuania</option>
              <option value="lu">Luxembourg</option>
              <option value="nl">Netherlands</option>
              <option value="nz">New Zealand</option>
              <option value="no">Norway</option>
              <option value="pl">Poland</option>
              <option value="pt">Portugal</option>
              <option value="kr">Republic of Korea</option>
              <option value="ru">Russia</option>
              <option value="sk">Slovakia</option>
              <option value="si">Slovenia</option>
              <option value="es">Spain</option>
              <option value="se">Sweden</option>
              <option value="ch">Switzerland</option>
              <option value="tw">Taiwan</option>
              <option value="ua">Ukraine</option>
              <option value="uk">United Kingdom</option>
              <option value="us">United States</option>       
            </select>
            <span class="clarify_field">(or a country you plan to relocate for a living)</span><br>

            <label>Sex at birth to compare with:</label>
            <select id="sex_to_compare" onchange="redraw_calendar();" class="form-control form-select form-select-sm">
              <option value="m">Male</option>
              <option value="f">Female</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-8 col-sm-10 col-11">
          <div id="faq" style="display: none;">
            <h1>FAQ:</h1>
            <p>
                <b>Q:</b> Where is a legend?<br>
                <b>A:</b> It's in the left top corner of a calendar.
            </p>
            <p class="has_list">
                <b>Q:</b> What does <b>PL2000F</b> mean in a legend?<br>
                <b>A:</b> <b>PL</b> means "Poland", <b>2000</b> means "data year", <b>F</b> means "Female".
                Colors mean: 
                <ul>
                  <li><b>Bold black</b> means "data for a birthday year", </li>
                  <li><b style="color: gray;">Bold gray</b> means "last data-available year for the origin country and sex at birth",</li>
                  <li><span style="color: gray;">Thin gray</span> (appears if compare-to country and/or sex are different) means "data for a compare-to country and/or sex".</li>
                </ul>
            </p>
            <p>
                <b>Q:</b> What are the charts on the left and on the right?<br>
                <b>A:</b> Left charts are "Deaths by age" and right ones are "Chance to die at age". 
            </p>
            <p>
                <b>Q:</b> What do these charts show?<br>
                <b>A:</b> Charts on the left ("Deaths by age") show how many people (of a particular sex in a particular country) have died on a specified year. Charts on the right ("Chance to die at age") show how many people of each age (among all the people of that age and sex in that particular country) have died on a specified year.
            </p>
            <p class="has_list">
                <b>Q:</b> Why do we have some "random year" chart as well?<br>
                <b>A:</b> This is not a "random year" chart, but "latest data-available year" chart for a specified country and sex:
                <ul>
                  <li>Solid <b>black bold</b> line (and <b>black bold</b> digits) show data for a specified "birthday year".</li>
                  <li>Solid <b style="color: gray;">gray bold</b> line (and <b style="color: gray;">gray bold</b> digits) show the latest available data for a specified country and sex pair. It is displayed (1) to let you to compare the trends of your birthday year with the latest data-available year, and (2) to show you how the things go right now according to the latest available data since you tend to stick with it more than with charts for your "birthday year".</li>
                </ul>
            </p>
            <p>
                <b>Q:</b> What are gray dashed charts (and gray thin digits)?<br>
                <b>A:</b> These are charts built for the latest data-available year for a "target country and sex" (country you've lived in during last 10+ years or plan to relocate to). In the top left corner legend is updated as well.
            </p>
            <p>
                <b>Q:</b> What is the purpose of this calendar?<br>
                <b>A:</b> The purpose of this calendar is to help me (and other people) (1) to visualise their life in terms of volumes and spaces rather than in abstract numbers, (2) to provide latest available scientific information about fair life expectancies for different countries, years and sexes, (3) to be informed on life expectancy change if you decide to relocate, (4) to get to know the causes and chances of deaths at different ages for me and my family - so I could be proactive and reduce the risks.
            </p>
            <p>
                <b>Q:</b> Where does this data come from?<br>
                <b>A:</b> <a href="https://mortality.org" target="_blank">mortality.org</a>
            </p>
            <p>
                <b>Q:</b> Who builds this calendar?<br>
                <b>A:</b> <a href="https://www.linkedin.com/in/aleksei-sotskov" target="_blank">Aleksei Sotskov</a>
            </p>
            <p>
                <b>Q:</b> How can I help / contribute / ask a question?<br>
                <b>A:</b> Please contact me via <a href="mailto:alexeyhimself@gmail.com?subject=[Contact you from calendarium.me] ...">alexeyhimself@gmail.com</a>
            </p>
            <p>
                <b>Q:</b> I'd like to get it in a PDF format to print and to put it on a wall. How can I do that?<br>
                <b>A:</b> You can get a PDF version of your calendar (like <a href="https://www.dropbox.com/scl/fi/uhscshx0uz04ey9dcchrh/Calendarium-1990-06-30-fi-se-m-m.pdf?rlkey=qrindotcis85o1f9v25bijo3s&dl=1" target="_blank">this one with QR-code</a> made for a Finland man moved to Sweden). Please configure the calendar you wish to print, copy URL link and send it to me at <a href="mailto:alexeyhimself@gmail.com?subject=[Order for PDF from calendarium.me] ...">alexeyhimself@gmail.com</a>. And I'll reply to you with a generated PDF.
            </p>
            <p>
                <b>Q:</b> What QR-code on a printed version does?<br>
                <b>A:</b> It leads you to online version of the Calendarium which allows you to see latest generated calendar for you, different data-skins, recommendations for health care.</a>
            </p>
          </div>
        </div>
      </div>          
    </div>

    <p id="log"></p>
  </body>
</html>
